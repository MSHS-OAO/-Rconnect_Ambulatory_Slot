---
title: "Sserver Processing"
output: html_document
---


```{r cars}
library(dplyr)
suppressMessages({
  library(readxl)
  library(writexl)
  library(plyr)
  library(dplyr)
  library(data.table)
  library(zoo)
  library(shiny)
  library(shinydashboard)
  library(shinydashboardPlus)
  library(shinyWidgets)
  library(htmlwidgets)
  library(lubridate)
  library(tcltk)
  library(tidyverse)
  library(plotly)
  library(knitr)
  library(kableExtra)
  library(leaflet)
  library(grid)
  library(gridExtra)
  library(eeptools)
  library(ggQC)
  #library(zipcode)
  library(utils)
  library(scales)
  library(chron)
  library(bupaR)
  library(shiny)
  library(DT)
  library(DiagrammeR)
  library(shinyalert)
  library(edeaR)
  library(processmapR)
  library(processmonitR)
  library(processanimateR)
  library(tidyr)
  library(lubridate)
  library(RColorBrewer)
  library(DiagrammeR)
  library(ggplot2)
  library(leaflet)
  library(readr)
  library(highcharter)
  library(ggforce) # for 'geom_arc_bar'
  library(packcircles) # for packed circle graph
  library(viridis)
  library(ggiraph)
  library(treemapify)
  library(treemap)
  library(broom)
  library(extrafont)
  library(tis) # for US holidays
  library(vroom)
  library(sjmisc)
  library(tools)
  library(here)
  library(shinyBS)
  library(shinyscreenshot)
  library(fasttime)
  library(shinycssloaders)
  library(feather)
  library(zipcodeR)
  library(formattable)
  library(shinyjs)
  library(janitor)
  library(patchwork)
  library(pryr)
  library(DBI)
  library(odbc)
})
source("access_process.R")

hisotrical.data.prev <- readRDS("/data/Ambulatory/Data/historical_data.rds")
hisotrical.data.prev <- hisotrical.data.prev %>% filter(!(Appt.DateYear %in% c("2022-04-12")))
historical.data <- bind_rows(hisotrical.data.prev,historical.data)
saveRDS(historical.data, "/data/Ambulatory/Data/historical_data.rds")


population.data_filtered.prev <- readRDS("/data/Ambulatory/Data/population_data.rds")
population.data_filtered.prev <- population.data_filtered.prev %>% filter(!(Appt.DateYear %in% c("2022-04-12")))
population.data_filtered <- bind_rows(population.data_filtered,population.data_filtered.prev)
saveRDS(population.data_filtered, "/data/Ambulatory/Data/population_data.rds")


utilization.data.prev <- readRDS("/data/Ambulatory/Data/utilization_data.rds")
utilization.data.prev <- utilization.data.prev %>% filter(!(Appt.DateYear %in% c("2022-04-12")))
utilization.data <- bind_rows(utilization.data,utilization.data.prev)
saveRDS(utilization.data, "/data/Ambulatory/Data/utilization_data.rds")


holid.prev <- read_feather("/data/Ambulatory/Data/holid.feather")
holid <- bind_rows(holid, holid.prev)
write_feather(holid, "/data/Ambulatory/Data/holid.feather")


```

